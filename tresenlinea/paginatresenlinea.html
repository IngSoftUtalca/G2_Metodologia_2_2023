<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="tresenlinea.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
</head>
<body style="margin-right:19% ; margin-top:8%; display:flex;align-items: center">
    <div id="phaser-container"></div>
    <script>
        class Menu_modalidad extends Phaser.Scene {
            preload() {
                this.load.setBaseURL('https://labs.phaser.io%27/');
                this.load.image('sky', 'assets/skies/space3.png');
                this.load.image('logo', 'assets/sprites/phaser3-logo.png');
                this.load.image('red', 'assets/particles/red.png');
            }

            create() {
                var fondo = this.add.image(200, 300, 'sky');

                const particles = this.add.particles(0, 0, 'red', {
                    speed: 100,
                    scale: { start: 1, end: 0 },
                    blendMode: 'ADD'
                });

                const logo = this.physics.add.image(400, 100, 'logo');

                logo.setVelocity(100, 200);
                logo.setBounce(1, 1);
                logo.setCollideWorldBounds(true);

                particles.startFollow(logo);

                // botones
                var option1 = this.add.text(525, 250, 'Jugador vs Jugador', { fontSize: '32px', fill: '#fff' }).setOrigin(0.5).setInteractive({ useHandCursor: true })
                .setInteractive().on('pointerdown', () => this.scene.start('Escena_seleccionfigura'));

                var option2 = this.add.text(525, 350, 'Jugador vs Máquina', { fontSize: '32px', fill: '#fff' }).setOrigin(0.5).setInteractive({ useHandCursor: true })
                .setInteractive().on('pointerdown', () => this.scene.start('Escena_seleccionfigura'));

                // pa que se puedan seleccionar
                

                option2.on('pointerup', function () {
                    console.log('Has seleccionado la Opción 2');
                    // Aca iria la pagina que abriria al clickear
                });
            }
        }

        class Escena_jvj extends Phaser.Scene{
            constructor() {
                super('Escena_jvj'); // 'Escena_jvj' es la clave única de esta escena
            }

            create(){
                this.cameras.main.setBackgroundColor('#608BA6'); //ajustar el fondo a blanco

                let graphics1 = this.add.graphics();
                graphics1.lineStyle(5, 0x000000); // grosor y color del borde
                graphics1.strokeRect(0, 0, this.game.config.width, this.game.config.height); // Dibuja el borde

                //Creación de lineas
                let linea1 = this.add.graphics().lineStyle(10, 0x5A6973);
                linea1.beginPath();
                linea1.moveTo(180, 100);
                linea1.lineTo(180, 500);
                linea1.closePath();
                linea1.strokePath();

                let linea2 = this.add.graphics().lineStyle(10, 0x5A6973);
                linea2.beginPath();
                linea2.moveTo(310, 100);
                linea2.lineTo(310, 500);
                linea2.closePath();
                linea2.strokePath();

                let linea3 = this.add.graphics().lineStyle(10, 0x5A6973);
                linea3.beginPath();
                linea3.moveTo(45, 235);
                linea3.lineTo(445, 235);
                linea3.closePath();
                linea3.strokePath();

                let linea4 = this.add.graphics().lineStyle(10, 0x5A6973);
                linea4.beginPath();
                linea4.moveTo(45, 365);
                linea4.lineTo(445, 365);
                linea4.closePath();
                linea4.strokePath();

                let texto = this.add.text(500, 150, 'Turno actual:', { font: '40px Arial', fill: '#5A6973', fontStyle: 'bold' });

                let x;
                let y;

                var self = this; // Guardar el contexto de 'this'
                var lienzo = self.add.graphics(0,0);
                self.input.on('pointerdown', function (pointer) {
                    x = pointer.x;
                    y = pointer.y;
                    console.log(x);
                    console.log(y);
                    lienzo.clear(); // Limpiar el lienzo
                    lienzo.beginFill(0xfa33aa); // Especificar el color del relleno
                    lienzo.drawCircle(x, y, 50); // Dibujar el círculo en las coordenadas del clic
                    lienzo.endFill(); // Finalizar el relleno
                });

            }

        }


        class Escena_seleccionfigura extends Phaser.Scene{
            constructor() {
                super('Escena_seleccionfigura'); // seleccionfigura' es la clave única de esta escena
            }

            create(){
                this.cameras.main.setBackgroundColor('#608BA6'); //ajustar el fondo a blanco

                let graphics1 = this.add.graphics();
                graphics1.lineStyle(5, 0x000000); // grosor y color del borde
                graphics1.strokeRect(0, 0, this.game.config.width, this.game.config.height); // Dibuja el borde

                // botones
                var option1 = this.add.text(525, 250, 'Figura X', { fontSize: '32px', fill: '#fff' }).setOrigin(0.5).setInteractive({ useHandCursor: true })
                .setInteractive().on('pointerdown', () => this.scene.start('Escena_jvj'));

                var option2 = this.add.text(525, 350, 'Figura O', { fontSize: '32px', fill: '#fff' }).setOrigin(0.5).setInteractive({ useHandCursor: true })
                .setInteractive().on('pointerdown', () => this.scene.start('Escena_jvj'));

                // pa que se puedan seleccionar
                

                option2.on('pointerup', function () {
                    console.log('Has seleccionado la Opción 2');
                    // Aca iria la pagina que abriria al clickear
                });

            }

        }

        const config = {
            type: Phaser.AUTO,
            width: 1050,
            height: 600,
            scene: [Menu_modalidad, Escena_seleccionfigura, Escena_jvj],
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 200 }
                }
            }
        };

        const game = new Phaser.Game(config);

    </script>
</body>

</html>